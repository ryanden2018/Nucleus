<h2><%= @post.title %></h2>

<p>by <%= @post_user_name %></p>

<% if @post_user_name == @username %>
<p>
<b><%= link_to "Edit post", edit_post_path(@post) %></b>
<%= button_to "Delete post", post_path(@post), method: :delete, data:{confirm: "Are you sure you want to delete this post?"} %>
</p>
<% end %>

<% if @post.edited %><p><i>Edited</i></p><% end %>


<% @post.break_content.each do |par| %>
  <p><%= par %></p>
<% end %>

<% if @is_plus == true %>
<% pluss = Pluss.find_by(post_id:@post.id,user_id:@user_id) %>
<%= button_to 'Remove Plus', pluss_path(pluss), method: :delete, params:{post_id:@post.id} %>
<% elsif @is_plus == false %>
<% pluss = Pluss.find_by(post_id:@post.id,user_id:@user_id) %>
<%= button_to 'Remove Minus', pluss_path(pluss), method: :delete, params:{post_id:@post.id} %>
<% else %>
<%= button_to 'Plus', plusses_path, method: :post, params:{:is_plus => true,post_id:@post.id} %>
<%= button_to 'Minus', plusses_path, method: :post, params:{post_id:@post.id} %>
<% end %>

<% if @post.net_plusses >= 0 %>
<p><%= @post.net_plusses %> plus<%= "ses" if @post.net_plusses != 1 %></p>
<% else %>
<p><%= (-1)*@post.net_plusses %> minus<%= "ses" if @post.net_plusses != -1 %></p>
<% end %>

<h3>Comments</h3>

<% if @comments.length > 0 %>
<ul>
  <% @comments.each do |comment| %>
    <li>
    <%= comment.user&.username %> says: &quot;<%= comment.content %>&quot;
    <%= "(edited)" if comment.edited %>
    <% if comment.user_id == @user_id %>
      <b><%= link_to "Edit", edit_comment_path(comment) %></b>
      <%= button_to "Delete comment", comment_path(comment), method: :delete %>
    <% end %>
    </li>
  <% end %>
</ul>
<% else %>
<p>No comments yet!</p>
<% end %>

<%= render 'comments/form' %>